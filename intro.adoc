= 🔗 Communication Between Components – Sample Flow
Otávio Santana
:toc: left
:icons: font
:sectnums:
:kroki-server-url: https://kroki.io

== 📡 Example: Communication Flow Using REST and gRPC

[mermaid,component-communication,format=svg]
----
sequenceDiagram
    participant 👤 Client
    participant 🌐 API Gateway
    participant 📦 User Service
    participant 🧠 Auth Service
    participant 🗃️ Database

    👤 Client->>🌐 API Gateway: REST Request (GET /users/123)
    🌐 API Gateway->>🧠 Auth Service: gRPC ValidateToken(token)
    🧠 Auth Service-->>🌐 API Gateway: OK
    🌐 API Gateway->>📦 User Service: REST GET /users/123
    📦 User Service->>🗃️ Database: SQL Query (user by ID)
    🗃️ Database-->>📦 User Service: Result
    📦 User Service-->>🌐 API Gateway: JSON user data
    🌐 API Gateway-->>👤 Client: 200 OK + user JSON
----

This diagram illustrates a typical hybrid architecture:

* REST at the edge (Client ↔ API Gateway ↔ User Service)
* gRPC for internal service-to-service calls (Auth)
* Direct DB access by internal services

