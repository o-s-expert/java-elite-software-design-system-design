= ðŸ”— Communication Between Components â€“ Sample Flow
OtÃ¡vio Santana
:toc: left
:icons: font
:sectnums:
:kroki-server-url: https://kroki.io

== ðŸ“¡ Example: Communication Flow Using REST and gRPC

[mermaid,component-communication,format=svg]
----
sequenceDiagram
    participant ðŸ‘¤ Client
    participant ðŸŒ API Gateway
    participant ðŸ“¦ User Service
    participant ðŸ§  Auth Service
    participant ðŸ—ƒï¸ Database

    ðŸ‘¤ Client->>ðŸŒ API Gateway: REST Request (GET /users/123)
    ðŸŒ API Gateway->>ðŸ§  Auth Service: gRPC ValidateToken(token)
    ðŸ§  Auth Service-->>ðŸŒ API Gateway: OK
    ðŸŒ API Gateway->>ðŸ“¦ User Service: REST GET /users/123
    ðŸ“¦ User Service->>ðŸ—ƒï¸ Database: SQL Query (user by ID)
    ðŸ—ƒï¸ Database-->>ðŸ“¦ User Service: Result
    ðŸ“¦ User Service-->>ðŸŒ API Gateway: JSON user data
    ðŸŒ API Gateway-->>ðŸ‘¤ Client: 200 OK + user JSON
----

This diagram illustrates a typical hybrid architecture:

* REST at the edge (Client â†” API Gateway â†” User Service)
* gRPC for internal service-to-service calls (Auth)
* Direct DB access by internal services

